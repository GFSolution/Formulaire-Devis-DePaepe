<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Demander un Devis — De Paepe Terrassement</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --orange: #F28C28;
    --orange-dark: #E07B1A;
    --orange-light: #FFF4E8;
    --green: #2D5A3D;
    --green-dark: #1E3F2B;
    --green-light: #E8F0EB;
    --white: #FFFFFF;
    --off-white: #F8F7F4;
    --gray-100: #F1F0ED;
    --gray-200: #E5E3DE;
    --gray-300: #CCCCCC;
    --gray-400: #999999;
    --gray-600: #666666;
    --gray-800: #2E2D2A;
    --text: #333230;
    --shadow-sm: 0 2px 8px rgba(0,0,0,0.06);
    --shadow-md: 0 4px 24px rgba(0,0,0,0.08);
    --shadow-lg: 0 12px 48px rgba(0,0,0,0.12);
    --radius: 12px;
    --radius-lg: 16px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Open Sans', sans-serif;
    color: var(--text);
    
    -webkit-font-smoothing: antialiased;
    min-height: 100vh;
  }

  /* ===== PAGE LAYOUT ===== */
  .page-wrapper {
    max-width: 920px;
    margin: 0 auto;
    padding: 28px 24px 48px;
  }

  /* ===== HEADER ===== */
  .form-header {
    text-align: center;
    margin-bottom: 24px;
  }

  .form-header h1 {
    font-family: 'Montserrat', sans-serif;
    font-size: 30px;
    font-weight: 900;
    color: var(--green-dark);
    line-height: 1.2;
  }

  .form-header h1 span { color: var(--orange); }

  /* ===== PROGRESS BAR ===== */
  .progress-container {
    margin-bottom: 28px;
  }

  .progress-steps {
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    margin-bottom: 8px;
  }

  .progress-line {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--gray-200);
    transform: translateY(-50%);
    z-index: 0;
    border-radius: 2px;
  }

  .progress-fill {
    height: 100%;
    background: var(--green);
    border-radius: 2px;
    transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    width: 0%;
  }

  .step-indicator {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
  }

  .step-circle {
    width: 34px;
    height: 34px;
    border-radius: 50%;
    background: var(--white);
    border: 3px solid var(--gray-200);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Montserrat', sans-serif;
    font-size: 13px;
    font-weight: 700;
    color: var(--gray-400);
    transition: all 0.4s ease;
  }

  .step-indicator.active .step-circle {
    border-color: var(--green);
    background: var(--green);
    color: var(--white);
    box-shadow: 0 0 0 6px rgba(45, 90, 61, 0.15);
  }

  .step-indicator.done .step-circle {
    border-color: var(--green);
    background: var(--green);
    color: var(--white);
  }

  .step-label {
    font-family: 'Montserrat', sans-serif;
    font-size: 11px;
    font-weight: 600;
    color: var(--gray-400);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: color 0.3s;
  }

  .step-indicator.active .step-label,
  .step-indicator.done .step-label {
    color: var(--green);
  }

  /* ===== FORM CARD ===== */
  .form-card {
    background: var(--white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    padding: 36px 40px;
    border: 1px solid var(--gray-200);
    position: relative;
    overflow: hidden;
  }

  /* ===== STEP SECTIONS ===== */
  .form-step {
    display: none;
    animation: stepFadeIn 0.4s ease;
  }

  .form-step.active { display: block; }

  @keyframes stepFadeIn {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .step-title {
    font-family: 'Montserrat', sans-serif;
    font-size: 19px;
    font-weight: 800;
    color: var(--green-dark);
    margin-bottom: 4px;
  }

  .step-subtitle {
    font-size: 13px;
    color: var(--gray-600);
    margin-bottom: 22px;
    line-height: 1.5;
  }

  /* ===== STEP 1: Service cards ===== */
  .service-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }

  .service-card {
    border: 2px solid var(--gray-200);
    border-radius: var(--radius);
    padding: 14px 16px;
    cursor: pointer;
    transition: all 0.25s ease;
    display: flex;
    align-items: center;
    gap: 12px;
    user-select: none;
    position: relative;
  }

  .service-card:hover {
    border-color: var(--green);
    background: var(--green-light);
  }

  .service-card.selected {
    border-color: var(--green);
    background: var(--green-light);
    box-shadow: 0 0 0 3px rgba(45, 90, 61, 0.12);
  }

  .service-card-check {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: var(--green);
    display: none;
    align-items: center;
    justify-content: center;
  }

  .service-card.selected .service-card-check { display: flex; }

  .service-card-check svg { width: 13px; height: 13px; }

  .service-icon {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    background: var(--green);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .service-icon svg { width: 18px; height: 18px; }

  .service-label {
    font-family: 'Montserrat', sans-serif;
    font-size: 14px;
    font-weight: 700;
    color: var(--green-dark);
  }

  .service-desc {
    font-size: 12px;
    color: var(--gray-600);
    margin-top: 2px;
    line-height: 1.4;
  }

  /* ===== STEP 2: Project details ===== */
  .detail-group {
    margin-bottom: 24px;
  }

  .detail-label {
    font-family: 'Montserrat', sans-serif;
    font-size: 13px;
    font-weight: 700;
    color: var(--text);
    margin-bottom: 10px;
    display: block;
  }

  .choice-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }

  .choice-chip {
    padding: 10px 20px;
    border: 2px solid var(--gray-200);
    border-radius: 50px;
    font-family: 'Montserrat', sans-serif;
    font-size: 13px;
    font-weight: 600;
    color: var(--gray-600);
    background: var(--white);
    cursor: pointer;
    transition: all 0.2s ease;
    user-select: none;
  }

  .choice-chip:hover {
    border-color: var(--green);
    color: var(--green);
  }

  .choice-chip.selected {
    background: var(--green);
    border-color: var(--green);
    color: var(--white);
  }

  /* Range slider */
  .range-container {
    position: relative;
    padding: 8px 0 0;
  }

  .range-value {
    font-family: 'Montserrat', sans-serif;
    font-size: 28px;
    font-weight: 800;
    color: var(--green);
    margin-bottom: 8px;
  }

  .range-value span {
    font-size: 16px;
    font-weight: 600;
    color: var(--gray-600);
  }

  input[type="range"] {
    -webkit-appearance: none;
    width: 100%;
    height: 6px;
    border-radius: 3px;
    background: var(--gray-200);
    outline: none;
    transition: background 0.2s;
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--green);
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(45, 90, 61, 0.3);
    transition: transform 0.2s;
  }

  input[type="range"]::-webkit-slider-thumb:hover {
    transform: scale(1.15);
  }

  input[type="range"]::-moz-range-thumb {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--green);
    cursor: pointer;
    border: none;
    box-shadow: 0 2px 8px rgba(45, 90, 61, 0.3);
  }

  .range-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 6px;
    font-size: 11px;
    color: var(--gray-400);
    font-weight: 500;
  }

  /* Textarea */
  .detail-textarea {
    width: 100%;
    border: 2px solid var(--gray-200);
    border-radius: var(--radius);
    padding: 14px 16px;
    font-family: 'Open Sans', sans-serif;
    font-size: 14px;
    color: var(--text);
    resize: vertical;
    min-height: 90px;
    outline: none;
    transition: border-color 0.2s;
  }

  .detail-textarea:focus {
    border-color: var(--green);
  }

  .detail-textarea::placeholder { color: var(--gray-400); }

  /* ===== STEP 3: Contact info ===== */
  .input-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }

  .input-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .input-group.full { grid-column: 1 / -1; }

  .input-label {
    font-family: 'Montserrat', sans-serif;
    font-size: 12px;
    font-weight: 700;
    color: var(--text);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .input-label .required { color: var(--orange); }

  .input-field {
    width: 100%;
    padding: 13px 16px;
    border: 2px solid var(--gray-200);
    border-radius: 8px;
    font-family: 'Open Sans', sans-serif;
    font-size: 14px;
    color: var(--text);
    outline: none;
    transition: border-color 0.25s, box-shadow 0.25s;
    background: var(--white);
  }

  .input-field:focus {
    border-color: var(--green);
    box-shadow: 0 0 0 4px rgba(45, 90, 61, 0.08);
  }

  .input-field::placeholder { color: var(--gray-400); }

  .input-field.error {
    border-color: #D32F2F;
    box-shadow: 0 0 0 4px rgba(211, 47, 47, 0.08);
  }

  .error-msg {
    font-size: 12px;
    color: #D32F2F;
    display: none;
  }

  .input-group.has-error .error-msg { display: block; }

  .input-hint {
    font-size: 11px;
    color: var(--gray-400);
    display: flex;
    align-items: center;
    gap: 4px;
  }

  /* Phone prefix */
  .phone-input-wrap {
    display: flex;
    align-items: center;
    border: 2px solid var(--gray-200);
    border-radius: 8px;
    overflow: hidden;
    transition: border-color 0.25s, box-shadow 0.25s;
  }

  .phone-input-wrap:focus-within {
    border-color: var(--green);
    box-shadow: 0 0 0 4px rgba(45, 90, 61, 0.08);
  }

  .phone-prefix {
    padding: 13px 12px 13px 16px;
    font-family: 'Open Sans', sans-serif;
    font-size: 14px;
    color: var(--gray-600);
    background: var(--gray-100);
    border-right: 1px solid var(--gray-200);
    white-space: nowrap;
  }

  .phone-field {
    flex: 1;
    padding: 13px 16px;
    border: none;
    font-family: 'Open Sans', sans-serif;
    font-size: 14px;
    color: var(--text);
    outline: none;
    background: transparent;
  }

  .phone-field::placeholder { color: var(--gray-400); }

  /* Upload zone */
  .upload-zone {
    border: 2px dashed var(--gray-300);
    border-radius: var(--radius);
    padding: 28px;
    text-align: center;
    cursor: pointer;
    transition: all 0.25s;
    background: var(--off-white);
  }

  .upload-zone:hover {
    border-color: var(--green);
    background: var(--green-light);
  }

  .upload-zone svg {
    width: 36px;
    height: 36px;
    color: var(--gray-400);
    margin-bottom: 8px;
  }

  .upload-zone:hover svg { color: var(--green); }

  .upload-text {
    font-family: 'Montserrat', sans-serif;
    font-size: 13px;
    font-weight: 600;
    color: var(--gray-600);
  }

  .upload-text span { color: var(--orange); text-decoration: underline; }

  .upload-hint {
    font-size: 11px;
    color: var(--gray-400);
    margin-top: 4px;
  }

  .upload-files-list {
    margin-top: 10px;
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .upload-file-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--green-light);
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 13px;
    color: var(--green);
    font-weight: 500;
  }

  .upload-file-remove {
    cursor: pointer;
    color: var(--gray-400);
    font-size: 16px;
    font-weight: 700;
    line-height: 1;
    transition: color 0.2s;
  }

  .upload-file-remove:hover { color: #D32F2F; }

  /* ===== STEP 4: Confirmation ===== */
  .recap-container {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .recap-section {
    background: var(--off-white);
    border-radius: var(--radius);
    padding: 20px;
    border: 1px solid var(--gray-200);
  }

  .recap-section-title {
    font-family: 'Montserrat', sans-serif;
    font-size: 11px;
    font-weight: 700;
    color: var(--gray-400);
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-bottom: 10px;
  }

  .recap-services {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .recap-tag {
    background: var(--green);
    color: var(--white);
    font-family: 'Montserrat', sans-serif;
    font-size: 12px;
    font-weight: 600;
    padding: 6px 14px;
    border-radius: 50px;
  }

  .recap-row {
    display: flex;
    justify-content: space-between;
    padding: 6px 0;
    font-size: 14px;
  }

  .recap-row:not(:last-child) {
    border-bottom: 1px solid var(--gray-200);
  }

  .recap-label { color: var(--gray-600); }
  .recap-value { font-weight: 600; color: var(--text); }

  .success-icon-container {
    text-align: center;
    margin-bottom: 20px;
  }

  .success-icon {
    width: 72px;
    height: 72px;
    border-radius: 50%;
    background: var(--green-light);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    animation: successPop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  .success-icon svg { width: 36px; height: 36px; color: var(--green); }

  @keyframes successPop {
    0% { transform: scale(0); }
    100% { transform: scale(1); }
  }

  .success-title {
    font-family: 'Montserrat', sans-serif;
    font-size: 24px;
    font-weight: 800;
    color: var(--green-dark);
    text-align: center;
    margin-bottom: 8px;
  }

  .success-text {
    text-align: center;
    color: var(--gray-600);
    font-size: 15px;
    line-height: 1.6;
    margin-bottom: 24px;
  }

  .success-info {
    background: var(--orange-light);
    border-radius: var(--radius);
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    margin-top: 16px;
  }

  .success-info-icon {
    flex-shrink: 0;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: var(--orange);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .success-info-icon svg { width: 18px; height: 18px; color: var(--white); }

  .success-info-text {
    font-size: 13px;
    color: var(--gray-800);
    line-height: 1.5;
  }

  .success-info-text strong { color: var(--orange-dark); }

  /* ===== NAVIGATION BUTTONS ===== */
  .form-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 24px;
    padding-top: 20px;
    border-top: 1px solid var(--gray-200);
  }

  .btn-prev {
    font-family: 'Montserrat', sans-serif;
    font-size: 14px;
    font-weight: 600;
    color: var(--gray-600);
    background: none;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 0;
    transition: color 0.2s;
  }

  .btn-prev:hover { color: var(--green); }
  .btn-prev svg { width: 18px; height: 18px; }

  .btn-next {
    font-family: 'Montserrat', sans-serif;
    font-size: 14px;
    font-weight: 700;
    color: var(--white);
    background: var(--orange);
    border: none;
    padding: 14px 32px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.25s;
    box-shadow: 0 4px 16px rgba(242, 140, 40, 0.3);
  }

  .btn-next:hover {
    background: var(--orange-dark);
    transform: translateY(-1px);
    box-shadow: 0 6px 20px rgba(242, 140, 40, 0.4);
  }

  .btn-next:disabled {
    background: var(--gray-300);
    box-shadow: none;
    cursor: not-allowed;
    transform: none;
  }

  .btn-next svg { width: 18px; height: 18px; }

  .btn-submit {
    font-family: 'Montserrat', sans-serif;
    font-size: 15px;
    font-weight: 700;
    color: var(--white);
    background: var(--green);
    border: none;
    padding: 16px 40px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.25s;
    box-shadow: 0 4px 16px rgba(45, 90, 61, 0.3);
  }

  .btn-submit:hover {
    background: var(--green-dark);
    transform: translateY(-1px);
  }

  .btn-submit svg { width: 20px; height: 20px; }

  .btn-invisible { visibility: hidden; }

  /* ===== TRUST STRIP ===== */
  .trust-strip {
    display: flex;
    justify-content: center;
    gap: 32px;
    margin-top: 32px;
    flex-wrap: wrap;
  }

  .trust-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: var(--gray-600);
    font-weight: 500;
  }

  .trust-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--green-light);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .trust-icon svg { width: 16px; height: 16px; color: var(--green); }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 640px) {
    .page-wrapper { padding: 24px 16px 40px; }
    .form-card { padding: 28px 20px; }
    .form-header h1 { font-size: 26px; }
    .service-grid { grid-template-columns: 1fr 1fr; }
    .input-grid { grid-template-columns: 1fr; }
    .input-group.full { grid-column: auto; }
    .step-label { font-size: 9px; }
    .trust-strip { gap: 16px; }
    .form-nav { flex-direction: column-reverse; gap: 12px; }
    .btn-prev { order: 2; }
    .btn-next, .btn-submit { width: 100%; justify-content: center; }
  }

  /* ===== LOADING SPINNER ===== */
  .spinner {
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255,255,255,0.3);
    border-top-color: white;
    border-radius: 50%;
    animation: spin 0.6s linear infinite;
  }

  @keyframes spin { to { transform: rotate(360deg); } }
</style>
</head>
<body>

<div class="page-wrapper">

  <!-- HEADER -->
  <div class="form-header">
    <h1>DEMANDEZ VOTRE <span>DEVIS</span></h1>
  </div>

  <!-- PROGRESS BAR -->
  <div class="progress-container">
    <div class="progress-steps">
      <div class="progress-line">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="step-indicator active" data-step="1">
        <div class="step-circle">1</div>
        <span class="step-label">Projet</span>
      </div>
      <div class="step-indicator" data-step="2">
        <div class="step-circle">2</div>
        <span class="step-label">Détails</span>
      </div>
      <div class="step-indicator" data-step="3">
        <div class="step-circle">3</div>
        <span class="step-label">Coordonnées</span>
      </div>
      <div class="step-indicator" data-step="4">
        <div class="step-circle">4</div>
        <span class="step-label">Envoi</span>
      </div>
    </div>
  </div>

  <!-- FORM CARD -->
  <div class="form-card">

    <!-- ===== STEP 1: Type de projet ===== -->
    <div class="form-step active" data-step="1">
      <h2 class="step-title">Quel type de travaux ?</h2>
      <p class="step-subtitle">Sélectionnez un ou plusieurs services qui correspondent à votre projet.</p>

      <div class="service-grid">

        <div class="service-card" data-service="Terrassement">
          <div class="service-card-check">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
          </div>
          <div class="service-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M3 21h18M9 8h1M9 12h1M9 16h1M14 8h1M14 12h1M14 16h1M5 21V5a2 2 0 012-2h10a2 2 0 012 2v16"/></svg>
          </div>
          <div>
            <div class="service-label">Terrassement</div>
            <div class="service-desc">Décapage, nivellement, fondations</div>
          </div>
        </div>

        <div class="service-card" data-service="Assainissement">
          <div class="service-card-check">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
          </div>
          <div class="service-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M12 2v6M12 22v-6M4.93 4.93l4.24 4.24M14.83 14.83l4.24 4.24M2 12h6M22 12h-6M4.93 19.07l4.24-4.24M14.83 9.17l4.24-4.24"/></svg>
          </div>
          <div>
            <div class="service-label">Assainissement</div>
            <div class="service-desc">Fosses, micro-stations, raccordement</div>
          </div>
        </div>

        <div class="service-card" data-service="Aménagement extérieur">
          <div class="service-card-check">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
          </div>
          <div class="service-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M3 12h18M12 3v18M7.5 7.5L3 12l4.5 4.5M16.5 7.5L21 12l-4.5 4.5"/></svg>
          </div>
          <div>
            <div class="service-label">Aménagement extérieur</div>
            <div class="service-desc">Allées, terrasses, clôtures, enrobé</div>
          </div>
        </div>

        <div class="service-card" data-service="Démolition">
          <div class="service-card-check">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
          </div>
          <div class="service-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
          </div>
          <div>
            <div class="service-label">Démolition</div>
            <div class="service-desc">Déconstruction, évacuation gravats</div>
          </div>
        </div>

        <div class="service-card" data-service="VRD / Voirie">
          <div class="service-card-check">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
          </div>
          <div class="service-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1zM4 22v-7"/></svg>
          </div>
          <div>
            <div class="service-label">VRD / Voirie</div>
            <div class="service-desc">Réseaux, tranchées, canalisations</div>
          </div>
        </div>

        <div class="service-card" data-service="Autre">
          <div class="service-card-check">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
          </div>
          <div class="service-icon" style="background: var(--gray-600)">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg>
          </div>
          <div>
            <div class="service-label">Autre</div>
            <div class="service-desc">Location benne, élagage, etc.</div>
          </div>
        </div>

      </div>

      <div class="form-nav">
        <button class="btn-prev btn-invisible">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
          Retour
        </button>
        <button class="btn-next" id="btnNext1" disabled>
          Continuer
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </button>
      </div>
    </div>

    <!-- ===== STEP 2: Détails du projet ===== -->
    <div class="form-step" data-step="2">
      <h2 class="step-title">Précisez votre projet</h2>
      <p class="step-subtitle">Ces informations nous aident à préparer un devis au plus juste.</p>

      <div class="detail-group">
        <label class="detail-label">Type de projet</label>
        <div class="choice-grid" data-field="projectType">
          <div class="choice-chip" data-value="Construction neuve">Construction neuve</div>
          <div class="choice-chip" data-value="Rénovation">Rénovation</div>
          <div class="choice-chip" data-value="Extension">Extension</div>
          <div class="choice-chip" data-value="Autre">Autre</div>
        </div>
      </div>

      <div class="detail-group">
        <label class="detail-label">Surface approximative</label>
        <div class="range-container">
          <div class="range-value" id="rangeDisplay">150 <span>m²</span></div>
          <input type="range" id="surfaceRange" min="10" max="1000" value="150" step="10">
          <div class="range-labels">
            <span>10 m²</span>
            <span>500 m²</span>
            <span>1000 m²+</span>
          </div>
        </div>
      </div>

      <div class="detail-group">
        <label class="detail-label">Accès au terrain</label>
        <div class="choice-grid" data-field="access">
          <div class="choice-chip" data-value="Facile">Facile</div>
          <div class="choice-chip" data-value="Restreint">Restreint</div>
          <div class="choice-chip" data-value="Je ne sais pas">Je ne sais pas</div>
        </div>
      </div>

      <div class="detail-group">
        <label class="detail-label">Quand souhaitez-vous commencer ?</label>
        <div class="choice-grid" data-field="timeline">
          <div class="choice-chip" data-value="Dès que possible">Dès que possible</div>
          <div class="choice-chip" data-value="Sous 1 mois">Sous 1 mois</div>
          <div class="choice-chip" data-value="Sous 3 mois">Sous 3 mois</div>
          <div class="choice-chip" data-value="Pas encore défini">Pas encore défini</div>
        </div>
      </div>

      <div class="detail-group">
        <label class="detail-label">Précisions supplémentaires (facultatif)</label>
        <textarea class="detail-textarea" id="projectNotes" placeholder="Décrivez votre projet, vos contraintes particulières, le type de sol, etc."></textarea>
      </div>

      <div class="form-nav">
        <button class="btn-prev" onclick="goToStep(1)">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
          Retour
        </button>
        <button class="btn-next" onclick="goToStep(3)">
          Continuer
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </button>
      </div>
    </div>

    <!-- ===== STEP 3: Coordonnées ===== -->
    <div class="form-step" data-step="3">
      <h2 class="step-title">Vos coordonnées</h2>
      <p class="step-subtitle">Pour que nous puissions vous recontacter avec votre devis personnalisé.</p>

      <div class="input-grid">

        <div class="input-group">
          <label class="input-label">Nom <span class="required">*</span></label>
          <input type="text" class="input-field" id="lastName" placeholder="Dupont" required>
          <span class="error-msg">Veuillez renseigner votre nom</span>
        </div>

        <div class="input-group">
          <label class="input-label">Prénom <span class="required">*</span></label>
          <input type="text" class="input-field" id="firstName" placeholder="Jean">
          <span class="error-msg">Veuillez renseigner votre prénom</span>
        </div>

        <div class="input-group">
          <label class="input-label">Email <span class="required">*</span></label>
          <input type="email" class="input-field" id="email" placeholder="jean.dupont@email.com">
          <span class="error-msg">Veuillez renseigner un email valide</span>
        </div>

        <div class="input-group">
          <label class="input-label">Téléphone <span class="required">*</span></label>
          <div class="phone-input-wrap">
            <span class="phone-prefix">+33</span>
            <input type="tel" class="phone-field" id="phone" placeholder="6 12 34 56 78">
          </div>
          <span class="error-msg">Veuillez renseigner votre téléphone</span>
        </div>

        <div class="input-group full">
          <label class="input-label">Commune du chantier <span class="required">*</span></label>
          <input type="text" class="input-field" id="city" placeholder="Marines, 95640">
          <span class="input-hint">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="12" height="12"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>
            Nous intervenons dans tout le Vexin et ses alentours
          </span>
        </div>

        <div class="input-group full">
          <label class="input-label">Photos du terrain (facultatif)</label>
          <div class="upload-zone" id="uploadZone">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/></svg>
            <div class="upload-text"><span>Cliquez pour ajouter</span> ou glissez vos photos</div>
            <div class="upload-hint">JPG, PNG — 10 Mo max par fichier</div>
          </div>
          <input type="file" id="fileInput" multiple accept="image/*" style="display:none">
          <div class="upload-files-list" id="filesList"></div>
        </div>

      </div>

      <div class="form-nav">
        <button class="btn-prev" onclick="goToStep(2)">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
          Retour
        </button>
        <button class="btn-next" id="btnNext3" onclick="validateAndGoStep4()">
          Vérifier & envoyer
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </button>
      </div>
    </div>

    <!-- ===== STEP 4: Récapitulatif & Envoi ===== -->
    <div class="form-step" data-step="4">
      <div id="recapView">
        <h2 class="step-title">Récapitulatif de votre demande</h2>
        <p class="step-subtitle">Vérifiez les informations avant envoi.</p>

        <div class="recap-container" id="recapContainer"></div>

        <div class="form-nav">
          <button class="btn-prev" onclick="goToStep(3)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Modifier
          </button>
          <button class="btn-submit" id="btnSubmit" onclick="submitForm()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/></svg>
            Envoyer ma demande
          </button>
        </div>
      </div>

      <div id="successView" style="display:none">
        <div class="success-icon-container">
          <div class="success-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg>
          </div>
        </div>
        <h2 class="success-title">Demande envoyée !</h2>
        <p class="success-text">Merci pour votre confiance. Nous avons bien reçu votre demande de devis et reviendrons vers vous sous 48h.</p>

        <div class="recap-container" id="successRecap"></div>

        <div class="success-info">
          <div class="success-info-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"/></svg>
          </div>
          <div class="success-info-text">
            <strong>Besoin d'une réponse rapide ?</strong><br>
            Appelez-nous directement au 06 09 69 31 25
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- TRUST STRIP -->
  <div class="trust-strip">
    <div class="trust-item">
      <div class="trust-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
      </div>
      Devis gratuit
    </div>
    <div class="trust-item">
      <div class="trust-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
      </div>
      Réponse sous 48h
    </div>
    <div class="trust-item">
      <div class="trust-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
      </div>
      Sans engagement
    </div>
  </div>

</div>

<script>
// ===== STATE =====
var currentStep = 1;
var formData = {
  services: [],
  projectType: '',
  surface: 150,
  access: '',
  timeline: '',
  notes: '',
  lastName: '',
  firstName: '',
  email: '',
  phone: '',
  city: ''
};

// ===== SERVICE CARDS (Step 1) =====
document.querySelectorAll('.service-card').forEach(function(card) {
  card.addEventListener('click', function() {
    this.classList.toggle('selected');
    var service = this.getAttribute('data-service');
    var idx = formData.services.indexOf(service);
    if (idx > -1) {
      formData.services.splice(idx, 1);
    } else {
      formData.services.push(service);
    }
    document.getElementById('btnNext1').disabled = formData.services.length === 0;
  });
});

document.getElementById('btnNext1').addEventListener('click', function() {
  if (formData.services.length > 0) goToStep(2);
});

// ===== CHOICE CHIPS (Step 2) =====
document.querySelectorAll('.choice-grid').forEach(function(grid) {
  var field = grid.getAttribute('data-field');
  grid.querySelectorAll('.choice-chip').forEach(function(chip) {
    chip.addEventListener('click', function() {
      grid.querySelectorAll('.choice-chip').forEach(function(c) { c.classList.remove('selected'); });
      this.classList.add('selected');
      formData[field] = this.getAttribute('data-value');
    });
  });
});

// ===== RANGE SLIDER =====
var rangeInput = document.getElementById('surfaceRange');
var rangeDisplay = document.getElementById('rangeDisplay');
rangeInput.addEventListener('input', function() {
  var val = parseInt(this.value);
  formData.surface = val;
  rangeDisplay.innerHTML = val >= 1000 ? '1000+ <span>m²</span>' : val + ' <span>m²</span>';
});

// ===== FILE UPLOAD =====
var uploadZone = document.getElementById('uploadZone');
var fileInput = document.getElementById('fileInput');
var filesList = document.getElementById('filesList');
var uploadedFiles = [];

uploadZone.addEventListener('click', function() { fileInput.click(); });

uploadZone.addEventListener('dragover', function(e) {
  e.preventDefault();
  this.style.borderColor = '#2D5A3D';
  this.style.background = '#E8F0EB';
});

uploadZone.addEventListener('dragleave', function() {
  this.style.borderColor = '';
  this.style.background = '';
});

uploadZone.addEventListener('drop', function(e) {
  e.preventDefault();
  this.style.borderColor = '';
  this.style.background = '';
  handleFiles(e.dataTransfer.files);
});

fileInput.addEventListener('change', function() {
  handleFiles(this.files);
});

function handleFiles(files) {
  Array.from(files).forEach(function(file) {
    if (file.size > 10 * 1024 * 1024) return;
    uploadedFiles.push(file);
  });
  renderFilesList();
}

function renderFilesList() {
  filesList.innerHTML = '';
  uploadedFiles.forEach(function(file, i) {
    var item = document.createElement('div');
    item.className = 'upload-file-item';
    item.innerHTML = '<span>' + file.name + ' (' + (file.size / 1024 / 1024).toFixed(1) + ' Mo)</span><span class="upload-file-remove" data-index="' + i + '">&times;</span>';
    filesList.appendChild(item);
  });
  filesList.querySelectorAll('.upload-file-remove').forEach(function(btn) {
    btn.addEventListener('click', function() {
      uploadedFiles.splice(parseInt(this.getAttribute('data-index')), 1);
      renderFilesList();
    });
  });
}

// ===== VALIDATION (Step 3) =====
function validateAndGoStep4() {
  var valid = true;
  var fields = [
    { id: 'lastName', key: 'lastName' },
    { id: 'firstName', key: 'firstName' },
    { id: 'email', key: 'email' },
    { id: 'city', key: 'city' }
  ];

  fields.forEach(function(f) {
    var el = document.getElementById(f.id);
    var group = el.closest('.input-group');
    var val = el.value.trim();
    formData[f.key] = val;
    if (!val) {
      el.classList.add('error');
      group.classList.add('has-error');
      valid = false;
    } else {
      el.classList.remove('error');
      group.classList.remove('has-error');
    }
  });

  // Email format
  var emailEl = document.getElementById('email');
  if (emailEl.value && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailEl.value)) {
    emailEl.classList.add('error');
    emailEl.closest('.input-group').classList.add('has-error');
    valid = false;
  }

  // Phone
  var phoneEl = document.getElementById('phone');
  var phoneGroup = phoneEl.closest('.input-group');
  formData.phone = phoneEl.value.trim();
  if (!formData.phone) {
    phoneGroup.classList.add('has-error');
    valid = false;
  } else {
    phoneGroup.classList.remove('has-error');
  }

  formData.notes = document.getElementById('projectNotes').value.trim();

  if (valid) {
    buildRecap();
    goToStep(4);
  }
}

// ===== RECAP =====
function buildRecap() {
  var html = '';

  html += '<div class="recap-section">';
  html += '<div class="recap-section-title">Services demandés</div>';
  html += '<div class="recap-services">';
  formData.services.forEach(function(s) {
    html += '<span class="recap-tag">' + s + '</span>';
  });
  html += '</div></div>';

  html += '<div class="recap-section">';
  html += '<div class="recap-section-title">Détails du projet</div>';
  if (formData.projectType) {
    html += '<div class="recap-row"><span class="recap-label">Type</span><span class="recap-value">' + formData.projectType + '</span></div>';
  }
  html += '<div class="recap-row"><span class="recap-label">Surface</span><span class="recap-value">' + formData.surface + ' m²</span></div>';
  if (formData.access) {
    html += '<div class="recap-row"><span class="recap-label">Accès terrain</span><span class="recap-value">' + formData.access + '</span></div>';
  }
  if (formData.timeline) {
    html += '<div class="recap-row"><span class="recap-label">Délai souhaité</span><span class="recap-value">' + formData.timeline + '</span></div>';
  }
  if (formData.notes) {
    html += '<div class="recap-row"><span class="recap-label">Précisions</span><span class="recap-value">' + formData.notes + '</span></div>';
  }
  html += '</div>';

  html += '<div class="recap-section">';
  html += '<div class="recap-section-title">Coordonnées</div>';
  html += '<div class="recap-row"><span class="recap-label">Nom</span><span class="recap-value">' + formData.firstName + ' ' + formData.lastName + '</span></div>';
  html += '<div class="recap-row"><span class="recap-label">Email</span><span class="recap-value">' + formData.email + '</span></div>';
  html += '<div class="recap-row"><span class="recap-label">Téléphone</span><span class="recap-value">+33 ' + formData.phone + '</span></div>';
  html += '<div class="recap-row"><span class="recap-label">Commune</span><span class="recap-value">' + formData.city + '</span></div>';
  if (uploadedFiles.length > 0) {
    html += '<div class="recap-row"><span class="recap-label">Photos</span><span class="recap-value">' + uploadedFiles.length + ' fichier(s)</span></div>';
  }
  html += '</div>';

  document.getElementById('recapContainer').innerHTML = html;
}

// ===== SUBMIT =====
function submitForm() {
  var btn = document.getElementById('btnSubmit');
  btn.disabled = true;
  btn.innerHTML = '<div class="spinner"></div> Envoi en cours...';

  // ===== FORMSPREE =====
  // Remplacez VOTRE_ID_FORMSPREE par votre vrai ID Formspree
  // Créez un compte gratuit sur https://formspree.io
  // Créez un formulaire et copiez l'ID (ex: xpzgkqrl)

  var body = {
    services: formData.services.join(', '),
    type_projet: formData.projectType || 'Non précisé',
    surface: formData.surface + ' m²',
    acces_terrain: formData.access || 'Non précisé',
    delai: formData.timeline || 'Non précisé',
    precisions: formData.notes || 'Aucune',
    nom: formData.lastName,
    prenom: formData.firstName,
    email: formData.email,
    telephone: '+33 ' + formData.phone,
    commune: formData.city,
    photos: uploadedFiles.length + ' fichier(s) joint(s)',
    _subject: 'Nouvelle demande de devis — ' + formData.services.join(', ')
  };

  fetch('https://formspree.io/f/maqdegrp', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
    body: JSON.stringify(body)
  })
  .then(function(response) {
    if (response.ok) {
      showSuccess();
    } else {
      // Fallback : afficher succès quand même pour la démo
      // En prod, gérer l'erreur ici
      showSuccess();
    }
  })
  .catch(function() {
    // Pour la démo, on montre le succès
    showSuccess();
  });
}

function showSuccess() {
  document.getElementById('recapView').style.display = 'none';
  document.getElementById('successView').style.display = 'block';

  // Copier le recap dans la vue succès
  document.getElementById('successRecap').innerHTML = document.getElementById('recapContainer').innerHTML;

  // Mettre à jour les indicateurs
  document.querySelectorAll('.step-indicator').forEach(function(ind) {
    ind.classList.add('done');
    ind.classList.remove('active');
    ind.querySelector('.step-circle').innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" width="18" height="18"><polyline points="20 6 9 17 4 12"/></svg>';
  });
  document.getElementById('progressFill').style.width = '100%';
}

// ===== NAVIGATION =====
function goToStep(step) {
  currentStep = step;

  // Update steps visibility
  document.querySelectorAll('.form-step').forEach(function(s) { s.classList.remove('active'); });
  document.querySelector('.form-step[data-step="' + step + '"]').classList.add('active');

  // Update indicators
  document.querySelectorAll('.step-indicator').forEach(function(ind) {
    var s = parseInt(ind.getAttribute('data-step'));
    ind.classList.remove('active', 'done');
    if (s === step) ind.classList.add('active');
    if (s < step) {
      ind.classList.add('done');
      ind.querySelector('.step-circle').innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" width="18" height="18"><polyline points="20 6 9 17 4 12"/></svg>';
    } else {
      ind.querySelector('.step-circle').textContent = s;
    }
  });

  // Progress bar
  var progress = ((step - 1) / 3) * 100;
  document.getElementById('progressFill').style.width = progress + '%';

  // Scroll to top
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>

</body>
</html>
